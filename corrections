
ğŸ“Œ Cell 5 â€” Base join graph
This cell joins together all master and reference data needed to build OMAT part records.
It links each NHA from DMD to:
Selected supplier & plant (from Supplier-by-Plant output)
Material description (MAKT)
Plant data (MARC)
Valuation & cost (MBEW)
Critical & CE flags (AUSP)
Supplier classification hierarchy (ZSUPPLIER_XREF + ZSUPP_CODE_MSTR)
In short:
This creates a single wide dataset containing everything SAP needs to build OMAT_PART_DTLS.
ğŸ“Œ Cell 6 â€” MRP supplier eligibility
This cell implements SAP 107767 logic to decide whether a part has a valid MRP supplier.
It checks if the NHA has a supplier in any of the MRP plants:
Copy code

2000, 1900, 3120, 1050, 1060, 1090
If at least one exists â†’ mrp_supplier = 1, else 0.
In short:
This determines whether the part is MRP-sourced in OMAT.
ğŸ“Œ Cell 7 â€” Final projection
This cell selects and formats exactly the columns required by
eng_test.rpt_omat_part_dtls.
It outputs:
Part identifiers (CMPPRTNO, NHA)
Description, supplier, lead time, costs
Critical & CE flags
Commodity, SMG group, head, SBM
MRP flag
PO supplier details
In short:
This converts the wide joined dataset into the final OMAT schema.
ğŸ“Œ Cell 8 â€” Delta insert
This cell inserts the prepared records into:
Copy code

eng_test.rpt_omat_part_dtls
using an explicit column list to ensure:
ANSI safety
Delta schema enforcement
No positional insert risks
In short:
This writes the final OMAT Part master into Fabric.





Here are the business-level definitions of Cell 5 to Cell 8 â€” this is what you would explain to OMAT, Supply-Chain, or Audit teams.
Cell 5 â€“ Assemble all part, supplier and classification data
This step brings together everything OMAT needs to understand a Buy NHA:
What the part is (description)
Where it is sourced (plant + supplier)
What it costs (standard & current cost)
How it is classified (criticality, CE, commodity, SMG, SBM)
It links demand-driven parts to their approved suppliers and plants using the official MRP supplier selection logic created by the business (107767).
Business meaning:
â€œBuild the complete master view of each Buy NHA â€” who supplies it, where it comes from, how risky it is, and how it is classified.â€
Cell 6 â€“ Identify MRP-preferred parts
This step checks if the part has at least one valid MRP-approved supplier in the LAM manufacturing plants.
If yes â†’ it is an MRP-managed part
If no â†’ it is non-MRP (riskier, manual sourcing)
Business meaning:
â€œTell OMAT which parts are officially supported by the MRP supply chain.â€
Cell 7 â€“ Shape the OMAT Part Master
This step formats all data into the OMAT Part Master structure that the application expects:
One row per CMPPRTNO + NHA
With supplier, cost, lead-time, risk flags and hierarchy codes
Business meaning:
â€œConvert all raw SAP data into a clean OMAT-ready part master record.â€
Cell 8 â€“ Publish to OMAT
This step saves the result into the OMAT reporting table so the OMAT application, dashboards, and planners can use it.
Business meaning:
â€œMake the OMAT Part Master officially available for obsolescence, risk, and sourcing analysis.â€

